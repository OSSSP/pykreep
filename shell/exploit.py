try:
    import gnureadline
    import sys

    sys.modules['readline'] = gnureadline
except ImportError:
    pass

import cmd
import shell.errors


class ExploitShell(cmd.Cmd):
    prompt = ''

    def __init__(self, exploit_name):
        super().__init__()

        if not exploit_name:
            raise shell.errors.InvalidCommandArgument('Missing command argument \'name\'')

        self.exploit_name = exploit_name
        self.prompt = 'K/' + self.exploit_name


    def do_back(self, p):
        return True

    def do_name(self, x):
        print(x)
        print(self.exploit_name)

    def emptyline(self):
        pass

    def do_EOF(self, line):
        return True

    def postloop(self):
        print()
